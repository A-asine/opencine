cmake_minimum_required(VERSION 2.8)
PROJECT(OpenCine)

set(CMAKE_AUTOMOC TRUE)

FIND_PACKAGE(Qt5Core REQUIRED)
FIND_PACKAGE(Qt5Widgets REQUIRED)
FIND_PACKAGE(Qt5Declarative REQUIRED)

INCLUDE_DIRECTORIES(${Qt5Widgets_INCLUDES})
INCLUDE_DIRECTORIES(${Qt5Declartive_INCLUDES})

FILE(GLOB SOURCE_FILES *.cpp)
FILE(GLOB HEADER_FSILES *.h)
FILE(GLOB UI_FILES *.ui)
FILE(GLOB RESOURCE_FILES *.qrc)

FILE(COPY "Themes" DESTINATION ${CMAKE_BINARY_DIR}/bin)

QT5_WRAP_UI(UI_FILES_MOC ${UI_FILES})
QT5_WRAP_CPP(HEADERS_MOC ${HEADER_FILES})

ADD_EXECUTABLE(${PROJECT_NAME} ${SOURCE_FILES} ${HEADER_FILES} ${UI_FILES_MOC} ${HEADERS_MOC} ${RESOURCE_FILES})

if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
	TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${QT_LIBRARIES} CinemaDNGDecoder /home/andi/Source/OpenCine/build/lib/libraw.so)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
	TARGET_LINK_LIBRARIES(${PROJECT_NAME} raw)
endif()

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})

QT5_USE_MODULES(${PROJECT_NAME} Widgets Declarative)
